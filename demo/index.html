<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="pragma" content="no-cache" />
    <title>Kampos Displacement Demo</title>
    <link rel="stylesheet" href="./lib/codemirror/codemirror.css">
    <style>
        body {
            margin: 0;
            background-image: linear-gradient(-45deg, peachpuff, palegreen, plum, peachpuff, palegreen, plum),
            linear-gradient(45deg, purple, darkblue, rebeccapurple, purple, darkblue, rebeccapurple);
            background-blend-mode: screen;
            font-family: "Nova round", cursive, fantasy;
            color: #bada;
        }

        header {
            width: fit-content;
            margin:  20vh auto;
            text-align: center;
        }

        h1 {
            font-size: 96px;
            margin: 0;
            text-shadow: 0 6px 10px darkslateblue;
        }

        h2 {
            font-size: 28px;
            margin: 0;
            text-shadow: 0 4px 4px darkslateblue;
        }

        video,
        canvas {
            display: block;
            vertical-align: top;
        }

        canvas {
            width: 100vw;
            height: auto;
        }

        video {
            display: none;
        }

        header > span {
            position: absolute;
            top: 50px;
            right: 50px;
        }

        section {
            margin: 10vh auto;
        }

        @media (min-width: 854px) {
            html, body {
                margin: 0;
            }

            h1 {
                font-size: 128px;
            }

            h2 {
                font-size: 32px;
            }

            section {
                display: flex;
                flex-direction: column;
                width: 854px;
            }

            canvas {
                flex: auto;
                width: 854px;
                height: 480px;
            }

            .CodeMirror {
                flex: auto;
            }

            #code1 + .CodeMirror {
                height: 118rem;
            }

            #code2 + .CodeMirror {
                height: 66rem;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css?family=Nova+Round&display=swap" rel="stylesheet">
    <script async defer src="https://buttons.github.io/buttons.js"></script>
</head>
<body>
    <header>
        <a class="github-button" href="https://github.com/wix-incubator/kampos" data-size="large" aria-label="Star wix-incubator/kampos on GitHub">Star</a>
        <h1>kampos</h1>
        <h2>Tiny and fast effects compositor</h2>
    </header>
    <!--<video id="video"-->
           <!--src="https://video.wixstatic.com/video/11062b_6ceb80744f45401caf9eb666caeb9887/480p/mp4/file.mp4"-->
           <!--autoplay-->
           <!--loop-->
           <!--muted-->
           <!--preload="auto"-->
           <!--crossorigin="anonymous"-->
           <!--playsinline></video>-->

    <!--<video id="video2"-->
           <!--src="https://video.wixstatic.com/video/11062b_1bb2d040b6da423fa2461982bd68bb12/480p/mp4/file.mp4"-->
           <!--autoplay-->
           <!--loop-->
           <!--muted-->
           <!--preload="auto"-->
           <!--crossorigin="anonymous"-->
           <!--playsinline></video>-->

    <video id="video1"
           src="https://video.wixstatic.com/video/11062b_2ccb88c1c6de4151b51879d6c90fca9d/480p/mp4/file.mp4"
           autoplay
           loop
           muted
           preload="auto"
           crossorigin="anonymous"
           playsinline></video>

    <video id="video2"
           src="https://video.wixstatic.com/video/11062b_735a34726eb64df29a56b30b60fe2db8/480p/mp4/file.mp4"
           autoplay
           loop
           muted
           preload="auto"
           crossorigin="anonymous"
           playsinline></video>

    <video id="video3"
           src="https://video.wixstatic.com/video/11062b_3da4a26484194105bde5b3935f5afb7b/480p/mp4/file.mp4"
           autoplay
           loop
           muted
           preload="auto"
           crossorigin="anonymous"
           playsinline></video>

    <video id="video4"
           src="https://video.wixstatic.com/video/11062b_62f64d80001a4490b6cc785d64359c6c/480p/mp4/file.mp4"
           autoplay
           loop
           muted
           preload="auto"
           crossorigin="anonymous"
           playsinline></video>

    <!--<video id="video7"-->
           <!--src="https://video.wixstatic.com/video/11062b_830709c744404d6ea7a10dcfd88e3a48/480p/mp4/file.mp4"-->
           <!--autoplay-->
           <!--loop-->
           <!--muted-->
           <!--preload="auto"-->
           <!--crossorigin="anonymous"-->
           <!--playsinline></video>-->

    <!--<video id="video8"-->
           <!--src="https://video.wixstatic.com/video/11062b_ba2c921477734f8b84ef0c71f64a2562/480p/mp4/file.mp4"-->
           <!--autoplay-->
           <!--loop-->
           <!--muted-->
           <!--preload="auto"-->
           <!--crossorigin="anonymous"-->
           <!--playsinline></video>-->

    <!--<canvas id="target"></canvas>-->
    <!--<canvas id="target2"></canvas>-->
    <!--<canvas id="target3"></canvas>-->
    <section>
        <h2>Displacement transition:</h2>
        <canvas id="target1"></canvas>
        <textarea id="code1"></textarea>
    </section>
    <section>
        <h2>Cross-fade transition with hue-rotation:</h2>
        <canvas id="target2"></canvas>
        <textarea id="code2"></textarea>
    </section>

    <script src="../index.js"></script>
    <script src="./lib/codemirror/codemirror.js"></script>
    <script src="./lib/codemirror/javascript.js"></script>
    <script>
        const text1 = document.querySelector('#code1');

        fetch('./disp.js')
            .then(resp => resp.text())
            .then(text => {
                text1.value = text;
                CodeMirror.fromTextArea(text1, {
                    value: text,
                    lineNumbers: true
                });
            });

        const text2 = document.querySelector('#code2');

        fetch('./hue-fade.js')
            .then(resp => resp.text())
            .then(text => {
                text2.value = text;
                CodeMirror.fromTextArea(text2, {
                    value: text,
                    lineNumbers: true
                });
            });
    </script>
    <script src="index.js"></script>
</body>
</html>
